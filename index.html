<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Foglalkoztat√°si Forma Kalkul√°tor 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #F2EFE9;
    --bg2: #E8E3DA;
    --ink: #1A1714;
    --ink2: #4A4540;
    --ink3: #8A8178;
    --accent: #C4521A;
    --accent2: #2B6CB0;
    --accent3: #276749;
    --card: #FDFCFA;
    --border: #D4CEC5;
    --shadow: rgba(26,23,20,0.08);
  }

  body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--ink); min-height: 100vh; }

  header {
    background: var(--card);
    border-bottom: 2px solid var(--border);
    padding: 40px 48px 32px; position: relative; overflow: hidden;
    text-align: center;
  }
  header::before {
    content: ''; position: absolute; right: -60px; top: -60px;
    width: 320px; height: 320px; border-radius: 50%; background: var(--accent); opacity: 0.06;
  }
  header::after {
    content: ''; position: absolute; left: -30px; bottom: -80px;
    width: 200px; height: 200px; border-radius: 50%; background: var(--accent2); opacity: 0.05;
  }
  .header-badge {
    display: inline-block; font-family: 'Fira Code', monospace;
    font-size: 11px; letter-spacing: 2px; text-transform: uppercase;
    color: var(--accent); border: 1px solid var(--accent);
    padding: 4px 12px; border-radius: 20px; margin-bottom: 18px;
  }
  header h1 { font-family: 'Plus Jakarta Sans', sans-serif; font-size: clamp(24px, 5vw, 44px); font-weight: 800; line-height: 1.15; position: relative; color: var(--ink); }
  header p { margin-top: 12px; font-size: clamp(12px, 2vw, 14px); color: var(--ink3); font-weight: 400; position: relative; letter-spacing: 0.3px; }
  .header-credit {
    margin-top: 22px; padding-top: 18px; border-top: 1px solid var(--border);
    display: flex; align-items: center; justify-content: center; gap: 10px; position: relative;
    flex-wrap: wrap;
  }
  .header-credit-logo {
    font-family: 'Plus Jakarta Sans', sans-serif; font-size: 15px; font-weight: 800;
    color: var(--accent); letter-spacing: -0.3px;
  }
  .header-credit-logo span { color: var(--ink2); font-weight: 400; font-size: 13px; }
  .header-credit-sep { color: var(--border); font-size: 18px; }
  .header-credit-name { font-size: 13px; color: var(--ink2); font-weight: 400; }
  .header-credit-name strong { color: var(--ink); font-weight: 600; }
  @media (max-width: 600px) {
    header { padding: 28px 20px 24px; }
    .header-credit-sep { display: none; }
    .header-credit { gap: 6px; flex-direction: column; }
  }

  main { max-width: 1120px; margin: 0 auto; padding: 40px 24px 80px; }

  .input-section {
    background: var(--card); border: 1px solid var(--border);
    border-radius: 20px; padding: 32px; margin-bottom: 28px;
    box-shadow: 0 4px 20px var(--shadow);
  }
  @media (max-width: 600px) { .input-section { padding: 20px 16px; border-radius: 16px; } }
  .section-label {
    font-family: 'Fira Code', monospace; font-size: 11px;
    letter-spacing: 2px; text-transform: uppercase; color: var(--ink3); margin-bottom: 20px;
  }
  .input-grid { display: grid; grid-template-columns: 1.2fr 1fr 1fr 1fr 1.4fr 0.9fr 0.9fr; gap: 14px; align-items: end; }
  @media (max-width: 1100px) { .input-grid { grid-template-columns: 1fr 1fr 1fr 1fr; } main { padding: 24px 16px 60px; } }
  @media (max-width: 700px) { .input-grid { grid-template-columns: 1fr 1fr; } }
  @media (max-width: 400px) { .input-grid { grid-template-columns: 1fr; } }

  .field label { display: block; font-size: 12.5px; font-weight: 500; color: var(--ink2); margin-bottom: 7px; }
  .field input, .field select {
    width: 100%; padding: 11px 13px; border: 1.5px solid var(--border); border-radius: 12px;
    font-family: 'Fira Code', monospace; font-size: 14px; background: var(--bg); color: var(--ink);
    outline: none; transition: border-color 0.2s;
  }
  .field input:focus, .field select:focus { border-color: var(--accent); background: var(--card); }
  .input-suffix { position: relative; }
  .input-suffix input { padding-right: 46px; }
  .input-suffix span { position: absolute; right: 11px; top: 50%; transform: translateY(-50%); font-family: 'Fira Code', monospace; font-size: 12px; color: var(--ink3); }

  .calc-btn {
    background: var(--ink); color: var(--bg); border: none; border-radius: 12px;
    padding: 12px 18px; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 14px; font-weight: 700;
    cursor: pointer; transition: background 0.2s, transform 0.1s; width: 100%;
  }
  .calc-btn:hover { background: var(--accent); transform: translateY(-1px); }

  /* EFO reference table */
  .efo-ref {
    background: #F0FFF4; border: 1px solid #9AE6B4; border-radius: 10px;
    padding: 14px 16px; margin-top: 18px;
  }
  .efo-ref-title {
    font-family: 'Fira Code', monospace; font-size: 10px;
    letter-spacing: 1.5px; text-transform: uppercase; color: var(--accent3); margin-bottom: 10px;
  }
  .efo-ref table { width: 100%; border-collapse: collapse; }
  .efo-ref th { font-family: 'Fira Code', monospace; font-size: 10px; letter-spacing: 1px; text-transform: uppercase; color: var(--ink3); padding: 5px 8px; text-align: left; }
  .efo-ref td { padding: 5px 8px; font-size: 12.5px; border-top: 1px solid #C6F6D5; }
  .efo-ref td:nth-child(2), .efo-ref td:nth-child(3) { font-family: 'Fira Code', monospace; text-align: right; }
  .efo-ref tr.active-row td { background: rgba(39,103,73,0.1); font-weight: 600; }

  #results { display: none; }
  #results.visible { display: block; }

  .recommendation {
    border-radius: 18px; padding: 22px 26px; margin-bottom: 24px;
    display: flex; align-items: flex-start; gap: 16px; animation: slideIn 0.4s ease;
  }
  @keyframes slideIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
  .recommendation.best-munkaber { background: #FEF3EC; border-left: 4px solid var(--accent); }
  .recommendation.best-megbizas { background: #EBF4FF; border-left: 4px solid var(--accent2); }
  .recommendation.best-efo      { background: #F0FFF4; border-left: 4px solid var(--accent3); }
  .rec-icon { font-size: 26px; flex-shrink: 0; margin-top: 2px; }
  .rec-title { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 17px; font-weight: 700; margin-bottom: 5px; }
  .rec-text { font-size: 13px; color: var(--ink2); line-height: 1.65; }

  .cards-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px; margin-bottom: 24px; }
  @media (max-width: 800px) { .cards-grid { grid-template-columns: 1fr; } }

  .result-card {
    background: var(--card); border: 1.5px solid var(--border); border-radius: 18px; padding: 22px;
    animation: slideIn 0.4s ease; position: relative; overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
  }
  .result-card:hover { transform: translateY(-2px); box-shadow: 0 8px 30px var(--shadow); }
  .result-card.winner::after {
    content: '‚úì LEGJOBB'; position: absolute; top: 12px; right: 12px;
    font-family: 'Fira Code', monospace; font-size: 9px; letter-spacing: 1.5px;
    padding: 3px 8px; border-radius: 6px; font-weight: 500;
  }
  .card-munkaber { color: var(--accent); }
  .card-munkaber.winner { background: #FEF9F6; border-color: var(--accent); }
  .card-munkaber.winner::after { background: var(--accent); color: white; }
  .card-megbizas { color: var(--accent2); }
  .card-megbizas.winner { background: #F0F7FF; border-color: var(--accent2); }
  .card-megbizas.winner::after { background: var(--accent2); color: white; }
  .card-efo { color: var(--accent3); }
  .card-efo.winner { background: #F0FFF6; border-color: var(--accent3); }
  .card-efo.winner::after { background: var(--accent3); color: white; }

  .card-type { font-family: 'Fira Code', monospace; font-size: 10px; letter-spacing: 2px; text-transform: uppercase; opacity: 0.7; margin-bottom: 6px; color: currentColor; }
  .card-title { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 16px; font-weight: 700; color: var(--ink); margin-bottom: 16px; }
  .card-metric { margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid var(--border); }
  .card-metric:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
  .metric-label { font-size: 11px; color: var(--ink3); margin-bottom: 2px; }
  .metric-value { font-family: 'Fira Code', monospace; font-size: 14px; font-weight: 500; color: var(--ink); }
  .metric-value.highlight { font-size: 20px; color: currentColor; }
  .metric-value.warn { color: #E53E3E; font-size: 13px; }
  .metric-value.muted { color: var(--ink3); font-style: italic; font-size: 12px; }

  .chart-section {
    background: var(--card); border: 1px solid var(--border);
    border-radius: 18px; padding: 26px; margin-bottom: 24px;
    animation: slideIn 0.4s ease 0.15s both;
  }
  .chart-section h3 { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 15px; font-weight: 700; margin-bottom: 20px; }
  .chart-bars { display: flex; flex-direction: column; gap: 12px; }
  .bar-row { display: flex; align-items: center; gap: 10px; }
  .bar-label { font-size: 12.5px; color: var(--ink2); width: 145px; flex-shrink: 0; font-weight: 500; }
  .bar-track { flex: 1; height: 34px; background: var(--bg2); border-radius: 6px; overflow: hidden; }
  .bar-fill { height: 100%; border-radius: 6px; transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1); display: flex; align-items: center; padding-left: 10px; width: 0; }
  .bar-fill span { font-family: 'Fira Code', monospace; font-size: 11px; color: white; white-space: nowrap; }
  .bar-val { font-family: 'Fira Code', monospace; font-size: 12px; color: var(--ink); width: 105px; text-align: right; flex-shrink: 0; }
  .bar-munkaber .bar-fill { background: var(--accent); }
  .bar-megbizas .bar-fill { background: var(--accent2); }
  .bar-efo .bar-fill { background: var(--accent3); }
  @media (max-width: 500px) {
    .bar-label { width: 80px; font-size: 11px; }
    .bar-val { width: 80px; font-size: 11px; }
    .bar-fill span { font-size: 10px; }
  }

  .table-section {
    background: var(--card); border: 1px solid var(--border);
    border-radius: 18px; overflow: hidden; margin-bottom: 24px;
    animation: slideIn 0.4s ease 0.1s both;
  }
  .table-scroll { overflow-x: auto; -webkit-overflow-scrolling: touch; }
  .table-header { padding: 18px 22px; border-bottom: 1px solid var(--border); }
  .table-header h3 { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 15px; font-weight: 700; }
  table.main-table { width: 100%; border-collapse: collapse; min-width: 520px; }
  table.main-table th { background: var(--bg); padding: 10px 16px; text-align: left; font-family: 'Fira Code', monospace; font-size: 10px; letter-spacing: 1px; text-transform: uppercase; color: var(--ink3); font-weight: 500; }
  table.main-table td { padding: 11px 16px; font-size: 13px; border-top: 1px solid var(--border); }
  table.main-table tr:hover td { background: var(--bg2); }
  table.main-table td.rl { font-weight: 500; color: var(--ink2); }
  table.main-table td.num { font-family: 'Fira Code', monospace; font-size: 12px; text-align: right; }
  table.main-table tr.tr { }
  table.main-table tr.tr td { background: var(--bg); font-weight: 600; font-family: 'Fira Code', monospace; }

  .cards-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px; margin-bottom: 24px; }
  @media (max-width: 800px) { .cards-grid { grid-template-columns: 1fr; } }

  .notes-section {
    background: var(--bg2); border-radius: 18px; padding: 18px 22px;
    animation: slideIn 0.4s ease 0.2s both;
  }
  .notes-section h4 { font-family: 'Fira Code', monospace; font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--ink3); margin-bottom: 10px; }
  .notes-section li { font-size: 12.5px; color: var(--ink2); line-height: 1.7; margin-bottom: 2px; }
  .notes-section ul { padding-left: 16px; }
  @media (max-width: 600px) {
    .result-card { padding: 16px; }
    .chart-section { padding: 18px 14px; }
    .recommendation { padding: 16px; }
    .notes-section { padding: 16px; }
    .megbizas-grid { grid-template-columns: 1fr !important; }
  }
</style>
</head>
<body>

<header>
  <div class="header-badge">2026 ¬∑ SukorAD√ì Kalkul√°tor</div>
  <h1>Foglalkoztat√°si Forma<br>√ñsszehasonl√≠t√≥</h1>
  <p>Munkab√©r ¬∑ Megb√≠z√°si szerz≈ëd√©s ¬∑ Egyszer≈±s√≠tett foglalkoztat√°s (EFO)</p>
  <div class="header-credit">
    <div class="header-credit-logo">SukorAD√ì <span>k√∂nyvel≈ëiroda</span></div>
    <div class="header-credit-sep">¬∑</div>
    <div class="header-credit-name">K√©sz√≠tette: <strong>V√°r√≥ci √Ågnes</strong></div>
  </div>
</header>

<main>
  <div class="input-section">
    <div class="section-label">Kiindul√≥pont ‚Äî nett√≥ k√©zhez kapott √∂sszeg</div>
    <div class="input-grid">
      <div class="field">
        <label>Nett√≥ √∂sszeg (Ft/h√≥)</label>
        <div class="input-suffix">
          <input type="number" id="nettoInput" value="400000" min="1000" step="1000">
          <span>Ft</span>
        </div>
      </div>
      <div class="field">
        <label>C√©g ad√≥z√°sa</label>
        <select id="cegAdozas">
          <option value="tao">TAO ‚Äî 13% szoch√≥</option>
          <option value="kiva">KIVA ‚Äî 10% KIVA</option>
        </select>
      </div>
      <div class="field">
        <label>Munkav√°llal√≥ st√°tusza</label>
        <select id="munkavStatusz">
          <option value="normal">√Åltal√°nos (SZJA + TB)</option>
          <option value="nyugdijas">Nyugd√≠jas (csak SZJA)</option>
        </select>
      </div>
      <div class="field">
        <label>Megb√≠z√°s t√≠pusa</label>
        <select id="megbizasTipus">
          <option value="eseti">Eseti megb√≠z√°s</option>
          <option value="tartos">Tart√≥s megb√≠z√°s (Tbj. bej.)</option>
        </select>
      </div>
      <div class="field">
        <label>EFO t√≠pusa</label>
        <select id="efoType" onchange="updateEfoRef()">
          <option value="alkalmi">Alkalmi munka</option>
          <option value="turisztikai">Turisztikai id√©nymunka</option>
          <option value="mezogazd">Mez≈ëgazd. id√©nymunka (0-120 nap)</option>
          <option value="mezogazd2">Mez≈ëgazd. id√©nymunka (121-210 nap)</option>
          <option value="film">Filmipari statiszta</option>
        </select>
      </div>
      <div class="field">
        <label>Napok sz√°ma (EFO, max 15/h√≥)</label>
        <div class="input-suffix">
          <input type="number" id="napokInput" value="15" min="1" max="15">
          <span>nap</span>
        </div>
      </div>
      <div class="field">
        <label>&nbsp;</label>
        <button class="calc-btn" onclick="calculate()">Kisz√°m√≠t ‚Üí</button>
      </div>
    </div>

    <!-- EFO referencia t√°bl√°zat -->
    <div class="efo-ref">
      <div class="efo-ref-title">üìä 2026-os EFO Adatok ‚Äî SukorAD√ì adatb√°zis alapj√°n ¬∑ minim√°lb√©r: 322 800 Ft/h√≥</div>
      <div style="overflow-x:auto;-webkit-overflow-scrolling:touch;">
      <table id="efoRefTable">
        <thead>
          <tr>
            <th>EFO fajt√°ja</th>
            <th style="text-align:right">Munk√°ltat√≥i k√∂zteher/nap</th>
            <th style="text-align:right">Min. kifizetend≈ë napi b√©r</th>
          </tr>
        </thead>
        <tbody id="efoRefBody"></tbody>
      </table>
      </div>
    </div>
  </div>

  <div id="results">
    <div id="recommendation" class="recommendation"></div>

    <div class="cards-grid">
      <div class="result-card card-munkaber" id="card-munkaber">
        <div class="card-type">01 ¬∑ Munkab√©r</div>
        <div class="card-title">Hagyom√°nyos alkalmazott</div>
        <div id="munkaber-metrics"></div>
      </div>
      <div class="result-card card-megbizas" id="card-megbizas">
        <div class="card-type">02 ¬∑ Megb√≠z√°s</div>
        <div class="card-title">Megb√≠z√°si szerz≈ëd√©s</div>
        <div id="megbizas-metrics"></div>
      </div>
      <div class="result-card card-efo" id="card-efo">
        <div class="card-type">03 ¬∑ EFO</div>
        <div class="card-title">Egyszer≈±s√≠tett foglalkoztat√°s</div>
        <div id="efo-metrics"></div>
      </div>
    </div>

    <div class="chart-section">
      <h3>Munk√°ltat√≥i √∂sszk√∂ltes√©g √∂sszehasonl√≠t√°sa</h3>
      <div class="chart-bars" id="chartBars"></div>
    </div>

    <div class="table-section">
      <div class="table-header"><h3>R√©szletes j√°rul√©kbont√°s</h3></div>
      <div style="overflow-x:auto">
        <table class="main-table">
          <thead>
            <tr>
              <th>T√©tel</th>
              <th style="text-align:right">Munkab√©r</th>
              <th style="text-align:right">Megb√≠z√°s</th>
              <th style="text-align:right" id="efoColHeader">EFO</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </div>

    <div class="notes-section">
      <h4>Fontos tudnival√≥k ¬∑ 2026</h4>
      <ul>
        <li><strong>EFO korl√°tok (1 mag√°nszem√©ly):</strong> max 120 nap/√©v | max egybef√ºgg≈ë 5 nap | max havi 15 nap</li>
        <li><strong>Mentes√≠tett keret√∂sszeg</strong> (dolgoz√≥ nem vall be, ha alatta van): Szakk√©pes√≠t√©st NEM ig√©nyl≈ë: <strong>19 305 Ft/nap</strong> (min.b√©r √ó 130%) | Szakk√©pes√≠t√©st ig√©nyl≈ë: <strong>22 308 Ft/nap</strong> (gar.b√©rmin. √ó 130%)</li>
        <li><strong>Max kifizethat√≥ napi b√©r EFO-n√°l:</strong> 29 700 Ft/nap/f≈ë (min.b√©r napi √ó 2 = 10 760 Ft √ó 2)</li>
        <li><strong>L√©tsz√°mkorl√°t:</strong> 1-5 f≈ës c√©g: max 2 f≈ë/nap | 6-20 f≈ës: max 4 f≈ë/nap | 20+ f≈ës: l√©tsz√°m √ó 20% ‚Äî Filmipari statiszt√°n√°l nem vonatkozik!</li>
        <li><strong>Megb√≠z√°sn√°l</strong> biztos√≠tott megb√≠zottat felt√©telez (nincs m√°s TB-k√∂teles jogviszonya). Ha nem biztos√≠tott, a TB-teher is v√°ltozhat.</li>
        <li><strong>10%-os k√∂lts√©g√°tal√°ny</strong> √©rv√©nyes√≠thet≈ë megb√≠z√°sn√°l az SZJA-alap cs√∂kkent√©s√©re</li>
        <li><strong>√öj 2026.01.01-t≈ël:</strong> Tart√≥s megb√≠z√°si jogviszony √∫j fogalma. Mez≈ëgazd. id√©nymunk√°n√°l a 120 nap + 90 nappal meghosszabb√≠that√≥.</li>
      </ul>

      <!-- Megb√≠z√°si jogviszony alkalmazhat√≥s√°gi figyelmeztet√©s -->
      <div style="margin-top:20px;background:#FFF5F5;border:2px solid #FC8181;border-radius:14px;padding:18px 20px;">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:14px;">
          <span style="font-size:22px;">‚ö†Ô∏è</span>
          <div style="font-family:'Plus Jakarta Sans',sans-serif;font-size:14px;font-weight:800;color:#C53030;">
            Fontos! A megb√≠z√°si jogviszony nem minden esetben alkalmazhat√≥
          </div>
        </div>
        <p style="font-size:12.5px;color:#742A2A;line-height:1.7;margin-bottom:14px;">
          A megb√≠z√°si szerz≈ëd√©s csak akkor jogszer≈±, ha a felek k√∂z√∂tti kapcsolat <strong>val√≥di megb√≠z√°si jelleg≈±</strong> ‚Äî 
          azaz nem √°ll fenn munkaviszony-szer≈± al√°-f√∂l√© rendelts√©g. A NAV rendszeresen vizsg√°lja √©s √°tmin≈ës√≠theti 
          a val√≥j√°ban munkaviszonynak min≈ës√ºl≈ë megb√≠z√°sokat, ami s√∫lyos b√≠rs√°got vonhat maga ut√°n.
        </p>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;" class="megbizas-grid">
          <div style="background:#F0FFF4;border:1px solid #9AE6B4;border-radius:10px;padding:14px;">
            <div style="font-family:'Plus Jakarta Sans',sans-serif;font-size:12px;font-weight:700;color:#276749;margin-bottom:10px;">‚úì Jellemz≈ëen alkalmazhat√≥</div>
            <ul style="padding-left:15px;margin:0;">
              <li style="font-size:12px;color:#276749;line-height:1.75;">Szabadfoglalkoz√°s√∫ szak√©rt≈ëk, tan√°csad√≥k (IT, marketing, p√©nz√ºgy, jog)</li>
              <li style="font-size:12px;color:#276749;line-height:1.75;">Oktat√≥k, tr√©nerek, el≈ëad√≥k ‚Äî alkalmi vagy rendszeres megb√≠z√°sban</li>
              <li style="font-size:12px;color:#276749;line-height:1.75;">K√∂nyvel≈ëk, ad√≥tan√°csad√≥k saj√°t √ºgyfeleikn√©l</li>
              <li style="font-size:12px;color:#276749;line-height:1.75;">Orvosok, eg√©szs√©g√ºgyi szakemberek √ºgyeleti/helyettes√≠t√©si feladatokra</li>
              <li style="font-size:12px;color:#276749;line-height:1.75;">√âp√≠t√©szek, tervez≈ëk, fejleszt≈ëk projekt alapon</li>
              <li style="font-size:12px;color:#276749;line-height:1.75;">√úgyvezet≈ëk, c√©gvezet≈ëk ‚Äî k√ºl√∂n√∂sen ha tagok is egyben</li>
              <li style="font-size:12px;color:#276749;line-height:1.75;">M≈±v√©szek, szerz≈ëk, fot√≥sok egyszeri vagy ism√©tl≈ëd≈ë alkot√°sokra</li>
            </ul>
          </div>
          <div style="background:#FFF5F5;border:1px solid #FEB2B2;border-radius:10px;padding:14px;">
            <div style="font-family:'Plus Jakarta Sans',sans-serif;font-size:12px;font-weight:700;color:#C53030;margin-bottom:10px;">‚úó √Åtmin≈ës√≠t√©si kock√°zat ‚Äî NEM alkalmazhat√≥</div>
            <ul style="padding-left:15px;margin:0;">
              <li style="font-size:12px;color:#742A2A;line-height:1.75;">K√∂t√∂tt munkaid≈ëben, meghat√°rozott helyen v√©gzett rendszeres munkav√©gz√©s</li>
              <li style="font-size:12px;color:#742A2A;line-height:1.75;">Ha a megb√≠z√≥ utas√≠t√°si jogot gyakorol a megb√≠zott felett</li>
              <li style="font-size:12px;color:#742A2A;line-height:1.75;">Kiz√°r√≥lag egy megb√≠z√≥nak v√©gzett, folyamatos √©s nem projektjelleg≈± tev√©kenys√©g</li>
              <li style="font-size:12px;color:#742A2A;line-height:1.75;">Ha az eszk√∂z√∂ket, munkaeszk√∂z√∂ket a megb√≠z√≥ biztos√≠tja</li>
              <li style="font-size:12px;color:#742A2A;line-height:1.75;">Ha a tev√©kenys√©g nem k√ºl√∂nb√∂zik a munkav√°llal√≥k feladatait√≥l</li>
            </ul>
          </div>
        </div>
        <p style="font-size:11.5px;color:#742A2A;margin-top:12px;padding-top:10px;border-top:1px solid #FEB2B2;">
          üí° K√©ts√©g eset√©n √©rdemes munkajog√°sszal vagy ad√≥tan√°csad√≥val egyeztetni a jogviszony min≈ës√≠t√©s√©r≈ël.
        </p>
      </div>
    </div>
  </div>
</main>

<script>
// 2026-os adatok ‚Äî SukorAD√ì adatb√°zis alapj√°n
const TAX = { szja: 0.15, munkavTB: 0.185, szocho: 0.13, kiva: 0.10, koltsegalany: 0.10 };

// EFO adatok 2026: minim√°lb√©r 322 800 Ft/h√≥, napi: 10 760 Ft
const EFO = {
  alkalmi:    { label: 'Alkalmi munka',                    napiBer: 13600, kozteher: 4800  },
  turisztikai:{ label: 'Turisztikai id√©nymunka',           napiBer: 6800,  kozteher: 2400  },
  mezogazd:   { label: 'Mez≈ëgazd. id√©nymunka (0-120 nap)', napiBer: 6800,  kozteher: 2400  },
  mezogazd2:  { label: 'Mez≈ëgazd. id√©nymunka (121-210)',   napiBer: 10200, kozteher: 3600  },
  film:       { label: 'Filmipari statiszta',              napiBer: 27100, kozteher: 9700  },
};

function fmt(n) { return Math.round(n).toLocaleString('hu-HU') + ' Ft'; }
function fmtN(n) { return Math.round(n).toLocaleString('hu-HU'); }

function updateEfoRef() {
  const sel = document.getElementById('efoType').value;
  const tbody = document.getElementById('efoRefBody');
  tbody.innerHTML = Object.entries(EFO).map(([k, v]) =>
    `<tr class="${k === sel ? 'active-row' : ''}">
      <td>${v.label}</td>
      <td>${fmtN(v.kozteher)} Ft/nap</td>
      <td>${fmtN(v.napiBer)} Ft/nap</td>
    </tr>`
  ).join('');
}

const MINBER_HAVI = 322800;
const JARULEK_ALAP_MIN = MINBER_HAVI * 0.30; // 96 840 Ft

function calcMunkaber(netto, munkaltadiRat, munkavTBRat) {
  // Norm√°l esetben: brutt√≥ = nett√≥ / (1 - TB - SZJA)
  let brutto = netto / (1 - munkavTBRat - TAX.szja);
  let jarulek_alap = brutto;
  let jarulekAlapMinAlkalmaz = false;

  // Ha a brutt√≥ < minim√°lb√©r 30% (√©s van TB = nem nyugd√≠jas),
  // akkor a j√°rul√©kokat legal√°bb a minimum alap ut√°n kell fizetni.
  // Ilyenkor: nett√≥ = brutt√≥ - (min_alap √ó TB) - (min_alap √ó SZJA)
  // ‚Üí brutt√≥ = nett√≥ + min_alap √ó (TB + SZJA)
  if (munkavTBRat > 0 && brutto < JARULEK_ALAP_MIN) {
    brutto = netto + JARULEK_ALAP_MIN * (munkavTBRat + TAX.szja);
    jarulek_alap = JARULEK_ALAP_MIN;
    jarulekAlapMinAlkalmaz = true;
  }

  const szja = jarulek_alap * TAX.szja;
  const tb = jarulek_alap * munkavTBRat;
  const munkaltAdo = jarulek_alap * munkaltadiRat;
  return { brutto, jarulek_alap, szja, tb, munkaltAdo, munkaltOssz: brutto + munkaltAdo, netto, jarulekAlapMinAlkalmaz };
}

function calcMegbizas(netto, munkaltadiRat, munkavTBRat, tartos) {
  // Biztos√≠tott-e?
  // - Tart√≥s megb√≠z√°s: mindig biztos√≠tott, min. j√°rul√©kalap = minim√°lb√©r 30%
  // - Eseti: csak ha d√≠j >= minim√°lb√©r 30%
  // - Nyugd√≠jas (munkavTBRat=0): soha nem biztos√≠tott TB szempontj√°b√≥l

  let dij, tb, munkaltAdo, jarulek_alap, nemBiztositott, tartosBiztAlkalmaz = false;

  if (munkavTBRat === 0) {
    // Nyugd√≠jas: csak SZJA, nincs TB, nincs munk√°ltat√≥i
    dij = netto / (1 - (1 - TAX.koltsegalany) * TAX.szja);
    tb = 0;
    munkaltAdo = 0;
    jarulek_alap = dij;
    nemBiztositott = true;
  } else if (tartos) {
    // Tart√≥s megb√≠z√°s: mindig biztos√≠tott, j√°rul√©kalap min. 96 840 Ft
    // El≈ësz√∂r pr√≥b√°ljuk norm√°l visszasz√°m√≠t√°ssal
    const dijNormal = netto / (1 - munkavTBRat - (1 - TAX.koltsegalany) * TAX.szja);
    if (dijNormal < JARULEK_ALAP_MIN) {
      // A j√°rul√©kokat a minimum alap ut√°n kell fizetni
      // nett√≥ = d√≠j - (min_alap √ó TB) - (min_alap √ó SZJA_alap_r√°t)
      const szjaRat = (1 - TAX.koltsegalany) * TAX.szja;
      dij = netto + JARULEK_ALAP_MIN * (munkavTBRat + szjaRat);
      jarulek_alap = JARULEK_ALAP_MIN;
      tartosBiztAlkalmaz = true;
    } else {
      dij = dijNormal;
      jarulek_alap = dij;
    }
    tb = jarulek_alap * munkavTBRat;
    munkaltAdo = jarulek_alap * munkaltadiRat;
    nemBiztositott = false;
  } else {
    // Eseti: biztos√≠tott csak ha d√≠j >= 96 840 Ft
    const dijBizt = netto / (1 - munkavTBRat - (1 - TAX.koltsegalany) * TAX.szja);
    if (dijBizt < JARULEK_ALAP_MIN) {
      dij = netto / (1 - (1 - TAX.koltsegalany) * TAX.szja);
      tb = 0;
      munkaltAdo = 0;
      jarulek_alap = dij;
      nemBiztositott = true;
    } else {
      dij = dijBizt;
      jarulek_alap = dij;
      tb = dij * munkavTBRat;
      munkaltAdo = dij * munkaltadiRat;
      nemBiztositott = false;
    }
  }

  const szja = jarulek_alap * (1 - TAX.koltsegalany) * TAX.szja;
  return { brutto: dij, jarulek_alap, szja, tb, munkaltAdo, munkaltOssz: dij + munkaltAdo, netto, nemBiztositott, tartosBiztAlkalmaz };
}

function calcEfo(netto, napok, efoKey) {
  const efo = EFO[efoKey];
  const kozteher = efo.kozteher * napok;
  const napiKif = netto / napok;

  // Mentes√≠tett keret√∂sszeg: szakk√©pes√≠t√©st nem ig√©nyl≈ë = 19 305 Ft/nap, ig√©nyl≈ë = 22 308 Ft/nap
  const mentesitettNemKepzett = 19305; // minim√°lb√©r √ó 130%
  const mentesitettKepzett    = 22308; // gar.b√©rmin. √ó 130%
  const mentesitettOsszNemKepzett = mentesitettNemKepzett * napok;
  const mentesitettOsszKepzett    = mentesitettKepzett    * napok;

  // SZJA sz√°m√≠t√°sa ha meghaladja a mentes√≠tett keretet
  const tullepesNemKepzett = Math.max(0, netto - mentesitettOsszNemKepzett);
  const tullepesKepzett    = Math.max(0, netto - mentesitettOsszKepzett);
  const szjaNemKepzett = tullepesNemKepzett * 0.15;
  const szjaKepzett    = tullepesKepzett    * 0.15;

  return {
    label: efo.label, napiBer: efo.napiBer, kozteherPerNap: efo.kozteher,
    napiKif, napok, kozteher, munkaltOssz: netto + kozteher, netto,
    mentesitettNapNemKepzett: mentesitettNemKepzett,
    mentesitettNapKepzett:    mentesitettKepzett,
    mentesitettOsszNemKepzett, mentesitettOsszKepzett,
    tullepesNemKepzett, tullepesKepzett,
    szjaNemKepzett, szjaKepzett,
    mentesitettAtlepve: netto > mentesitettOsszNemKepzett,
  };
}

function calculate() {
  const netto = parseFloat(document.getElementById('nettoInput').value) || 0;
  const napok = parseInt(document.getElementById('napokInput').value) || 15;
  const efoKey = document.getElementById('efoType').value;
  const cegAdozas = document.getElementById('cegAdozas').value;
  const isKiva = cegAdozas === 'kiva';
  const isNyugdijas = document.getElementById('munkavStatusz').value === 'nyugdijas';
  const isTartos = document.getElementById('megbizasTipus').value === 'tartos';
  const munkaltadiRat = (isKiva && !isNyugdijas) ? TAX.kiva : (!isNyugdijas ? TAX.szocho : 0);
  const munkaltadiLabel = isNyugdijas ? 'Munk√°ltat√≥i j√°rul√©k (nyugd√≠jas: mentes)' : (isKiva ? 'KIVA (10%)' : 'Szoch√≥ (13%)');
  const munkavTBRat = isNyugdijas ? 0 : TAX.munkavTB;

  if (netto < 1000) { alert('Legal√°bb 1 000 Ft-ot adjon meg!'); return; }

  const m = calcMunkaber(netto, munkaltadiRat, munkavTBRat);
  const mb = calcMegbizas(netto, munkaltadiRat, munkavTBRat, isTartos);
  const e = calcEfo(netto, napok, efoKey);

  const EFO_MAX_NAPI = 29700;
  const efoMaxNetto = EFO_MAX_NAPI * napok;
  const efoNemLehetseges = netto > efoMaxNetto;

  const costs = [
    { key: 'munkaber', label: 'Munkab√©r', cost: m.munkaltOssz },
    { key: 'megbizas', label: 'Megb√≠z√°s', cost: mb.munkaltOssz },
    ...(!efoNemLehetseges ? [{ key: 'efo', label: 'EFO', cost: e.munkaltOssz }] : []),
  ].sort((a, b) => a.cost - b.cost);
  const winner = costs[0].key;

  document.querySelector('#card-megbizas .card-title').textContent = isTartos ? 'Tart√≥s megb√≠z√°s (Tbj.)' : 'Megb√≠z√°si szerz≈ëd√©s';
  document.querySelector('#card-megbizas .card-type').textContent = isTartos ? '02 ¬∑ Tart√≥s megb√≠z√°s' : '02 ¬∑ Megb√≠z√°s';

  // K√°rty√°k
  ['munkaber', 'megbizas'].forEach(t => {
    const data = t === 'munkaber' ? m : mb;
    document.getElementById('card-' + t).classList.toggle('winner', winner === t);

    let sorok = [];

    if (t === 'munkaber') {
      const jarulekAlapSor = m.jarulekAlapMinAlkalmaz
        ? [{ l: '‚ö†Ô∏è J√°rul√©kalap (min. 30% = ' + fmt(JARULEK_ALAP_MIN) + ')', v: fmt(m.jarulek_alap), w: true }]
        : [];
      const tbSor = isNyugdijas
        ? { l: 'Munkav√°llal√≥ TB j√°rul√©k', v: '‚Äî (nyugd√≠jas, mentes)' }
        : { l: 'Munkav√°llal√≥ TB j√°rul√©k (18,5%)', v: '‚Äì ' + fmt(data.tb) };
      sorok = [
        { l: 'Brutt√≥ b√©r', v: fmt(data.brutto) },
        ...jarulekAlapSor,
        { l: 'Munkav√°llal√≥ SZJA (15%)', v: '‚Äì ' + fmt(data.szja) },
        tbSor,
        { l: 'Nett√≥ k√©zhez', v: fmt(netto), h: true },
        { l: 'Munk√°ltat√≥i ' + (isNyugdijas ? 'j√°rul√©k' : munkaltadiLabel), v: isNyugdijas ? '‚Äî (nyugd√≠jas, mentes)' : fmt(data.munkaltAdo) },
        { l: 'Munk√°ltat√≥ √∂sszk√∂lts√©ge', v: fmt(data.munkaltOssz) },
      ];
    } else {
      // Megb√≠z√°s
      let biztStatusz;
      if (isNyugdijas) {
        biztStatusz = { l: 'Biztos√≠t√°si jogviszony', v: '‚Äî (nyugd√≠jas, mentes)' };
      } else if (isTartos) {
        biztStatusz = { l: 'Megb√≠z√°s t√≠pusa', v: '‚úì Tart√≥s megb√≠z√°s (Tbj. bej.) ‚Äî folyamatos biztos√≠tott' };
      } else if (mb.nemBiztositott) {
        biztStatusz = { l: 'Biztos√≠t√°si jogviszony', v: '‚úó Nem biztos√≠tott (d√≠j < ' + fmt(JARULEK_ALAP_MIN) + ')', w: true };
      } else {
        biztStatusz = { l: 'Biztos√≠t√°si jogviszony', v: '‚úì Biztos√≠tott' };
      }

      const tartosSor = mb.tartosBiztAlkalmaz
        ? [{ l: '‚ö†Ô∏è J√°rul√©kalap (min. 30% = ' + fmt(JARULEK_ALAP_MIN) + ')', v: fmt(mb.jarulek_alap), w: true }]
        : [];

      const tbSor = mb.nemBiztositott
        ? { l: 'Munkav√°llal√≥ TB j√°rul√©k', v: '‚Äî (nem biztos√≠tott)' }
        : { l: 'Munkav√°llal√≥ TB j√°rul√©k (18,5%)', v: '‚Äì ' + fmt(data.tb) };
      const munkaltSor = mb.nemBiztositott
        ? { l: 'Munk√°ltat√≥i j√°rul√©k', v: '‚Äî (nem biztos√≠tott)' }
        : { l: 'Munk√°ltat√≥i ' + munkaltadiLabel, v: fmt(data.munkaltAdo) };
      sorok = [
        { l: 'Megb√≠z√°si d√≠j (brutt√≥)', v: fmt(data.brutto) },
        biztStatusz,
        ...tartosSor,
        { l: 'Munkav√°llal√≥ SZJA (90% √ó 15%)', v: '‚Äì ' + fmt(data.szja) },
        tbSor,
        { l: 'Nett√≥ k√©zhez', v: fmt(netto), h: true },
        munkaltSor,
        { l: 'Munk√°ltat√≥ √∂sszk√∂lts√©ge', v: fmt(data.munkaltOssz) },
      ];
    }

    document.getElementById(t + '-metrics').innerHTML = sorok
      .map(r => `<div class="card-metric"><div class="metric-label">${r.l}</div><div class="metric-value${r.h?' highlight':''}${r.muted?' muted':''}${r.w?' warn':''}">${r.v}</div></div>`)
      .join('');
  });

  // EFO k√°rtya
  document.getElementById('card-efo').classList.toggle('winner', winner === 'efo');

  if (efoNemLehetseges) {
    document.getElementById('card-efo').classList.remove('winner');
    document.getElementById('efo-metrics').innerHTML = `
      <div style="background:#FED7D7;border:1.5px solid #FC8181;border-radius:12px;padding:16px;text-align:center;margin-top:8px;">
        <div style="font-size:22px;margin-bottom:8px;">üö´</div>
        <div style="font-weight:700;color:#C53030;font-size:14px;margin-bottom:6px;">EFO nem alkalmazhat√≥</div>
        <div style="font-size:12px;color:#742A2A;line-height:1.6;">
          A kifizetett nett√≥ √∂sszeg meghaladja a maxim√°lisan<br>
          kifizethet≈ë EFO b√©rt:<br>
          <strong>${napok} nap √ó 29 700 Ft = ${fmt(EFO_MAX_NAPI * napok)} Ft</strong>
        </div>
      </div>`;
  } else {
  const napMaxWarn = e.napiKif > 29700;

  let efoRows = [
    { l: 'EFO t√≠pusa', v: e.label },
    { l: 'Minim√°lisan kifizetend≈ë napi b√©r', v: fmt(e.napiBer) + '/nap' },
    { l: 'T√©nylegesen kifizetett napi', v: fmt(e.napiKif) + '/nap' + (napMaxWarn ? ' ‚ö†Ô∏è' : ''), c: napMaxWarn ? 'warn' : '' },
    { l: 'Nett√≥ k√©zhez (' + napok + ' nap)', v: fmt(netto), h: true },
    { l: 'K√∂zteher/nap √ó ' + napok + ' nap', v: fmtN(e.kozteherPerNap) + ' √ó ' + napok + ' = ' + fmt(e.kozteher) },
    { l: 'Munk√°ltat√≥ √∂sszk√∂lts√©ge', v: fmt(e.munkaltOssz) },
  ];
  document.getElementById('efo-metrics').innerHTML = efoRows.map(r =>
    `<div class="card-metric"><div class="metric-label">${r.l}</div><div class="metric-value${r.h?' highlight':''} ${r.c||''}">${r.v}</div></div>`
  ).join('');

  if (napMaxWarn) {
    document.getElementById('efo-metrics').innerHTML += '<div style="background:#FED7D7;border-radius:6px;padding:8px 10px;font-size:11.5px;color:#C53030;margin-top:8px;">‚ö†Ô∏è A kifizetett napi b√©r meghaladja a max. 29 700 Ft/nap korl√°tot!</div>';
  }

  // Mentes√≠tett keret√∂sszeg t√°j√©koztat√≥ SZJA
  if (e.mentesitettAtlepve) {
    const szjaInfoHtml = `
      <div style="background:#FFFBEB;border:1px solid #F6C90E;border-radius:8px;padding:12px 14px;margin-top:10px;font-size:12px;color:#7A5F00;">
        <div style="font-family:'DM Mono',monospace;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:8px;color:#B45309;">
          ‚ö†Ô∏è T√°j√©koztat√≥ ‚Äî Mentes√≠tett keret √°tl√©pve
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px 16px;margin-bottom:8px;">
          <div style="font-size:11px;color:#92400E;font-weight:600;">Szakk√©pes√≠t√©st NEM ig√©nyl≈ë</div>
          <div style="font-size:11px;color:#92400E;font-weight:600;">Szakk√©pes√≠t√©st ig√©nyl≈ë</div>
          <div>Mentes√≠tett: <strong>${fmt(e.mentesitettOsszNemKepzett)}</strong><br>(${fmtN(e.mentesitettNapNemKepzett)} Ft/nap √ó ${napok} nap)</div>
          <div>Mentes√≠tett: <strong>${fmt(e.mentesitettOsszKepzett)}</strong><br>(${fmtN(e.mentesitettNapKepzett)} Ft/nap √ó ${napok} nap)</div>
          <div>Keret felett: <strong>${fmt(e.tullepesNemKepzett)}</strong></div>
          <div>Keret felett: <strong>${e.tullepesKepzett > 0 ? fmt(e.tullepesKepzett) : '‚Äî'}</strong></div>
          <div style="color:#C53030;font-weight:700;">Fizetend≈ë SZJA (15%): ${fmt(e.szjaNemKepzett)}</div>
          <div style="color:${e.szjaKepzett > 0 ? '#C53030' : '#276749'};font-weight:700;">Fizetend≈ë SZJA (15%): ${e.szjaKepzett > 0 ? fmt(e.szjaKepzett) : '0 Ft ‚úì'}</div>
        </div>
        <div style="font-size:11px;border-top:1px solid #F6C90E;padding-top:7px;color:#92400E;">
          A dolgoz√≥nak SZJA-bevall√°st kell beny√∫jtania √©s ad√≥t fizetnie a mentes√≠tett keret feletti √∂sszeg ut√°n.
        </div>
      </div>`;
    document.getElementById('efo-metrics').innerHTML += szjaInfoHtml;
  } else {
    document.getElementById('efo-metrics').innerHTML += `
      <div style="background:#F0FFF4;border:1px solid #9AE6B4;border-radius:8px;padding:10px 14px;margin-top:10px;font-size:12px;color:#276749;">
        ‚úì <strong>Mentes√≠tett kereten bel√ºl</strong> ‚Äî a dolgoz√≥nak nem kell SZJA-t fizetnie √©s bevall√°st beny√∫jtania.<br>
        <span style="font-size:11px;opacity:0.8;">Nem k√©pzett: max ${fmt(e.mentesitettOsszNemKepzett)} | K√©pzett: max ${fmt(e.mentesitettOsszKepzett)}</span>
      </div>`;
  }
  } // end !efoNemLehetseges

  // Aj√°nl√°s
  const megtakaritas = costs.length > 1 ? costs[1].cost - costs[0].cost : 0;
  const recEl = document.getElementById('recommendation');
  const recData = {
    munkaber: { icon: 'üíº', title: 'Munkab√©r a leggazdas√°gosabb', text: `Enn√©l a nett√≥ szintn√©l a hagyom√°nyos munkab√©r ker√ºl a legkevesebbe a munk√°ltat√≥nak.${efoNemLehetseges ? ' (EFO nem alkalmazhat√≥: a nett√≥ meghaladja a ' + fmt(EFO_MAX_NAPI * napok) + ' Ft-os max. korl√°tot.)' : ''}` },
    megbizas: { icon: 'üìã', title: 'Megb√≠z√°s a leggazdas√°gosabb', text: `A 10%-os k√∂lts√©g√°tal√°nynak k√∂sz√∂nhet≈ëen a megb√≠z√°si forma most olcs√≥bb.${efoNemLehetseges ? ' (EFO nem alkalmazhat√≥: a nett√≥ meghaladja a ' + fmt(EFO_MAX_NAPI * napok) + ' Ft-os max. korl√°tot.)' : ''}` },
    efo:      { icon: '‚ö°', title: 'EFO a leggazdas√°gosabb', text: `${e.label} eset√©n a munk√°ltat√≥i k√∂zteher ${fmt(e.kozteher)} (${napok} nap √ó ${fmtN(e.kozteherPerNap)} Ft). Ez a legolcs√≥bb, de max 15 nap/h√≥ √©s 120 nap/√©v korl√°tot figyeljen!` },
  }[winner];
  recEl.className = 'recommendation best-' + winner;
  recEl.innerHTML = `<div class="rec-icon">${recData.icon}</div><div>
    <div class="rec-title">${recData.title}</div>
    <div class="rec-text">${recData.text}<br><br>
      ${costs.length > 1 ? '<strong>Megtakar√≠t√°s a 2. legolcs√≥bbhoz k√©pest: ' + fmt(megtakaritas) + '/h√≥</strong><br>' : ''}
      Sorrend: ${costs.map((c,i) => `${i+1}. ${c.label} (${fmt(c.cost)})`).join(' ‚Üí ')}${efoNemLehetseges ? ' ¬∑ <span style="color:#C53030">EFO: kiz√°rva</span>' : ''}
    </div></div>`;

  // Grafikon
  const chartEl = document.getElementById('chartBars');
  const maxCost = Math.max(...costs.map(c => c.cost));
  chartEl.innerHTML = [...costs].sort((a,b)=>b.cost-a.cost).map(c => `
    <div class="bar-row bar-${c.key}">
      <div class="bar-label">${c.label}</div>
      <div class="bar-track"><div class="bar-fill" data-w="${(c.cost/maxCost*100).toFixed(1)}"><span>${fmt(c.cost)}</span></div></div>
      <div class="bar-val">${fmt(c.cost)}</div>
    </div>`).join('');
  requestAnimationFrame(() => chartEl.querySelectorAll('.bar-fill').forEach(b => b.style.width = b.dataset.w + '%'));

  // T√°bl√°zat
  const tbLabel = isNyugdijas ? '‚Äî TB j√°rul√©k (nyugd√≠jas: mentes)' : '‚Äî Munkav√°llal√≥ TB j√°rul√©k (18,5%)';
  const mbTbVal = mb.nemBiztositott ? null : (isNyugdijas ? 0 : -mb.tb);
  const mbMunkaltVal = mb.nemBiztositott ? null : mb.munkaltAdo;
  const jarulekAlapSorTabla = m.jarulekAlapMinAlkalmaz
    ? [{ l: '‚ö†Ô∏è J√°rul√©kalap min. (30% = ' + fmt(JARULEK_ALAP_MIN) + ')', m: m.jarulek_alap, mb: null, e: null, info: true }]
    : [];
  const megbizasNemBiztInfo = mb.nemBiztositott
    ? [{ l: '‚ÑπÔ∏è Megb√≠z√°s: nem biztos√≠tott (d√≠j < ' + fmt(JARULEK_ALAP_MIN) + ')', m: null, mb: null, e: null, info2: true }]
    : [];
  const eTabla = efoNemLehetseges ? null : e;
  const tableRows = [
    { l: 'Brutt√≥ b√©r / megb√≠z√°si d√≠j / nett√≥ b√©r', m: m.brutto, mb: mb.brutto, e: eTabla ? eTabla.netto : null },
    ...jarulekAlapSorTabla,
    ...megbizasNemBiztInfo,
    { l: '‚Äî Munkav√°llal√≥ SZJA',                    m: -m.szja,  mb: -mb.szja,  e: 0 },
    { l: tbLabel,                                   m: isNyugdijas ? 0 : -m.tb, mb: mbTbVal, e: 0 },
    { l: '= Nett√≥ k√©zhez',                          m: netto,    mb: netto,     e: netto, t: true },
    { l: '+ Munk√°ltat√≥i j√°rul√©k / EFO k√∂zteher',   m: m.munkaltAdo, mb: mbMunkaltVal, e: eTabla ? eTabla.kozteher : null },
    { l: '= Munk√°ltat√≥ √∂sszk√∂lts√©ge',               m: m.munkaltOssz, mb: mb.munkaltOssz, e: eTabla ? eTabla.munkaltOssz : null, t: true },
    { l: 'Hat√©konys√°g (nett√≥ / √∂sszk√∂lts.)',        m: null, mb: null, e: null, pct: true,
      mP: netto/m.munkaltOssz, mbP: netto/mb.munkaltOssz, eP: eTabla ? netto/eTabla.munkaltOssz : null },
  ];
  document.getElementById('tableBody').innerHTML = tableRows.map(r => {
    const tc = r.t ? ' class="tr"' : r.info ? ' style="background:#FFF5F5"' : r.info2 ? ' style="background:#EBF8FF"' : '';
    const dc = r.t ? ' tr' : '';
    if (r.pct) return `<tr${tc}><td class="rl${dc}">${r.l}</td><td class="num${dc}">${(r.mP*100).toFixed(1)}%</td><td class="num${dc}">${(r.mbP*100).toFixed(1)}%</td><td class="num${dc}">${r.eP !== null ? (r.eP*100).toFixed(1)+'%' : '<span style="color:#C53030;font-size:11px">N/A</span>'}</td></tr>`;
    const f = v => v === null ? '<span style="color:#718096;font-style:italic;font-size:11px">‚Äî</span>' : v < 0 ? `<span style="color:var(--accent)">‚Äì ${fmt(Math.abs(v))}</span>` : v === 0 ? '‚Äî' : fmt(v);
    return `<tr${tc}><td class="rl${dc}">${r.l}</td><td class="num${dc}" style="${r.info?'color:#C53030;font-weight:600':''}">${f(r.m)}</td><td class="num${dc}" style="${r.info2?'color:#2B6CB0;font-size:11px':''}colspan="${r.info2?3:1}">${f(r.mb)}</td><td class="num${dc}">${f(r.e)}</td></tr>`;
  }).join('');

  document.getElementById('results').classList.add('visible');
  setTimeout(() => document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
}

// Init
updateEfoRef();
window.addEventListener('load', calculate);
</script>
</body>
</html>
